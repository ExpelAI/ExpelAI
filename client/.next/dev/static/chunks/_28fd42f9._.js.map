{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/expel-ai/client/utils/api.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:5000/api/data';\r\n\r\nexport const DataService = {\r\n    getPestDetections: async () => {\r\n        try {\r\n            const response = await axios.get(`${API_URL}/pests`);\r\n            return response.data;\r\n        } catch (error) {\r\n            console.error('Error fetching pest detections:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    getSensorData: async () => {\r\n        try {\r\n            const response = await axios.get(`${API_URL}/sensors`);\r\n            return response.data;\r\n        } catch (error) {\r\n            console.error('Error fetching sensor data:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    uploadImage: async (file: File) => {\r\n        const formData = new FormData();\r\n        formData.append('image', file);\r\n\r\n        try {\r\n            const response = await axios.post(`${API_URL}/detect`, formData, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n            });\r\n            return response.data;\r\n        } catch (error) {\r\n            console.error('Error uploading image:', error);\r\n            throw error;\r\n        }\r\n    }\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,UAAU;AAET,MAAM,cAAc;IACvB,mBAAmB;QACf,IAAI;YACA,MAAM,WAAW,MAAM,mJAAK,CAAC,GAAG,CAAC,GAAG,QAAQ,MAAM,CAAC;YACnD,OAAO,SAAS,IAAI;QACxB,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,mCAAmC;YACjD,MAAM;QACV;IACJ;IAEA,eAAe;QACX,IAAI;YACA,MAAM,WAAW,MAAM,mJAAK,CAAC,GAAG,CAAC,GAAG,QAAQ,QAAQ,CAAC;YACrD,OAAO,SAAS,IAAI;QACxB,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,MAAM;QACV;IACJ;IAEA,aAAa,OAAO;QAChB,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,SAAS;QAEzB,IAAI;YACA,MAAM,WAAW,MAAM,mJAAK,CAAC,IAAI,CAAC,GAAG,QAAQ,OAAO,CAAC,EAAE,UAAU;gBAC7D,SAAS;oBACL,gBAAgB;gBACpB;YACJ;YACA,OAAO,SAAS,IAAI;QACxB,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,0BAA0B;YACxC,MAAM;QACV;IACJ;AACJ"}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/expel-ai/client/components/Dashboard/PestTrendChart.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport {\r\n    LineChart,\r\n    Line,\r\n    XAxis,\r\n    YAxis,\r\n    CartesianGrid,\r\n    Tooltip,\r\n    Legend,\r\n    ResponsiveContainer\r\n} from 'recharts';\r\n\r\ninterface PestData {\r\n    createdAt: string;\r\n    count: number;\r\n    pestType: string;\r\n}\r\n\r\ninterface PestTrendChartProps {\r\n    data: PestData[];\r\n}\r\n\r\nconst PestTrendChart: React.FC<PestTrendChartProps> = ({ data }) => {\r\n    // Format data for Recharts: group by date or just use the raw data if it's already sorted\r\n    const chartData = data.map(item => ({\r\n        time: new Date(item.createdAt).toLocaleDateString(),\r\n        count: item.count,\r\n        type: item.pestType\r\n    }));\r\n\r\n    return (\r\n        <div className=\"w-full h-[400px] bg-[#0f172a] p-6 rounded-2xl shadow-sm border border-slate-800\">\r\n            <h3 className=\"text-xl font-semibold text-slate-100 mb-6\">Pest Detection Trends</h3>\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                <LineChart\r\n                    data={chartData}\r\n                    margin={{ top: 5, right: 30, left: 20, bottom: 5 }}\r\n                >\r\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#1e293b\" />\r\n                    <XAxis\r\n                        dataKey=\"time\"\r\n                        stroke=\"#94a3b8\"\r\n                        fontSize={12}\r\n                        tickLine={false}\r\n                        axisLine={false}\r\n                    />\r\n                    <YAxis\r\n                        stroke=\"#94a3b8\"\r\n                        fontSize={12}\r\n                        tickLine={false}\r\n                        axisLine={false}\r\n                    />\r\n                    <Tooltip\r\n                        contentStyle={{\r\n                            backgroundColor: '#1e293b',\r\n                            borderRadius: '12px',\r\n                            border: '1px solid #334155',\r\n                            boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.5)'\r\n                        }}\r\n                        itemStyle={{ color: '#fff' }}\r\n                        labelStyle={{ color: '#94a3b8' }}\r\n                    />\r\n                    <Legend verticalAlign=\"top\" height={36} />\r\n                    <Line\r\n                        type=\"monotone\"\r\n                        dataKey=\"count\"\r\n                        name=\"Pest Count\"\r\n                        stroke=\"#10b981\"\r\n                        strokeWidth={3}\r\n                        dot={{ fill: '#10b981', strokeWidth: 2, r: 4 }}\r\n                        activeDot={{ r: 6, strokeWidth: 0 }}\r\n                    />\r\n                </LineChart>\r\n            </ResponsiveContainer>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PestTrendChart;\r\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHA;;;AAwBA,MAAM,iBAAgD,CAAC,EAAE,IAAI,EAAE;IAC3D,0FAA0F;IAC1F,MAAM,YAAY,KAAK,GAAG,CAAC,CAAA,OAAQ,CAAC;YAChC,MAAM,IAAI,KAAK,KAAK,SAAS,EAAE,kBAAkB;YACjD,OAAO,KAAK,KAAK;YACjB,MAAM,KAAK,QAAQ;QACvB,CAAC;IAED,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAG,WAAU;0BAA4C;;;;;;0BAC1D,6LAAC,6LAAmB;gBAAC,OAAM;gBAAO,QAAO;0BACrC,cAAA,6LAAC,qKAAS;oBACN,MAAM;oBACN,QAAQ;wBAAE,KAAK;wBAAG,OAAO;wBAAI,MAAM;wBAAI,QAAQ;oBAAE;;sCAEjD,6LAAC,iLAAa;4BAAC,iBAAgB;4BAAM,QAAO;;;;;;sCAC5C,6LAAC,iKAAK;4BACF,SAAQ;4BACR,QAAO;4BACP,UAAU;4BACV,UAAU;4BACV,UAAU;;;;;;sCAEd,6LAAC,iKAAK;4BACF,QAAO;4BACP,UAAU;4BACV,UAAU;4BACV,UAAU;;;;;;sCAEd,6LAAC,qKAAO;4BACJ,cAAc;gCACV,iBAAiB;gCACjB,cAAc;gCACd,QAAQ;gCACR,WAAW;4BACf;4BACA,WAAW;gCAAE,OAAO;4BAAO;4BAC3B,YAAY;gCAAE,OAAO;4BAAU;;;;;;sCAEnC,6LAAC,mKAAM;4BAAC,eAAc;4BAAM,QAAQ;;;;;;sCACpC,6LAAC,+JAAI;4BACD,MAAK;4BACL,SAAQ;4BACR,MAAK;4BACL,QAAO;4BACP,aAAa;4BACb,KAAK;gCAAE,MAAM;gCAAW,aAAa;gCAAG,GAAG;4BAAE;4BAC7C,WAAW;gCAAE,GAAG;gCAAG,aAAa;4BAAE;;;;;;;;;;;;;;;;;;;;;;;AAM1D;KAtDM;uCAwDS"}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/expel-ai/client/components/Dashboard/ImageUpload.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef } from 'react';\nimport { DataService } from '@/utils/api';\n\n// This tells TypeScript that ImageUpload can now receive the 'onUploadSuccess' instruction\nexport default function ImageUpload({ onUploadSuccess }: { onUploadSuccess?: () => void }) {\n    const [selectedFile, setSelectedFile] = useState<File | null>(null);\n    const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n    const [uploading, setUploading] = useState(false);\n    const [analysisResult, setAnalysisResult] = useState<any>(null);\n    const [message, setMessage] = useState<{ text: string; type: 'success' | 'error' } | null>(null);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n\n    const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n        if (event.target.files && event.target.files[0]) {\n            const file = event.target.files[0];\n            setSelectedFile(file);\n            setPreviewUrl(URL.createObjectURL(file));\n            setMessage(null);\n            setAnalysisResult(null);\n        }\n    };\n\n    const handleUpload = async () => {\n        if (!selectedFile) return;\n\n        setUploading(true);\n        setMessage(null);\n        setAnalysisResult(null);\n\n        try {\n            const response = await DataService.uploadImage(selectedFile);\n\n            // 1. Save results to show in the UI box\n            setAnalysisResult(response.data);\n            setMessage({ text: 'Analysis complete!', type: 'success' });\n\n            // üîÑ 2. NEW: Trigger the refresh of the main dashboard history\n            if (onUploadSuccess) {\n                onUploadSuccess();\n            }\n\n        } catch (error) {\n            console.error('Upload failed:', error);\n            setMessage({ text: 'Analysis failed. Please try again.', type: 'error' });\n        } finally {\n            setUploading(false);\n        }\n    };\n\n    return (\n        <div className=\"bg-[#0f172a] p-6 rounded-2xl border border-slate-800 shadow-xl mb-6\">\n            <h3 className=\"text-xl font-bold text-white mb-4\">AI Pest Detection</h3>\n\n            <div className=\"flex flex-col md:flex-row gap-6 items-start\">\n                <div className=\"flex-1 w-full\">\n                    <div\n                        className={`border-2 border-dashed rounded-xl p-8 text-center transition-colors cursor-pointer\n                            ${selectedFile ? 'border-emerald-500/50 bg-emerald-500/5' : 'border-slate-700 hover:border-slate-500 hover:bg-slate-800/50'}\n                        `}\n                        onClick={() => fileInputRef.current?.click()}\n                    >\n                        <input\n                            type=\"file\"\n                            ref={fileInputRef}\n                            onChange={handleFileSelect}\n                            accept=\"image/*\"\n                            className=\"hidden\"\n                        />\n\n                        {previewUrl ? (\n                            <div className=\"relative h-48 w-full flex items-center justify-center\">\n                                <img\n                                    src={previewUrl}\n                                    alt=\"Preview\"\n                                    className=\"max-h-full max-w-full rounded-lg shadow-lg border border-slate-700\"\n                                />\n                            </div>\n                        ) : (\n                            <div className=\"flex flex-col items-center gap-3 py-6\">\n                                <p className=\"text-slate-300 font-medium\">Click to upload leaf image</p>\n                            </div>\n                        )}\n                    </div>\n                </div>\n\n                <div className=\"w-full md:w-64 flex flex-col gap-4\">\n                    <button\n                        onClick={handleUpload}\n                        disabled={!selectedFile || uploading}\n                        className={`py-3 px-6 rounded-xl font-bold text-white transition-all transform shadow-lg\n                            ${!selectedFile || uploading ? 'bg-slate-800 text-slate-500' : 'bg-emerald-600 hover:bg-emerald-500'}\n                        `}\n                    >\n                        {uploading ? 'Analyzing...' : 'Analyze Image'}\n                    </button>\n                    {message && (\n                        <div className={`p-3 rounded-lg text-sm font-medium text-center ${message.type === 'success' ? 'bg-emerald-500/10 text-emerald-400 border border-emerald-500/20' : 'bg-red-500/10 text-red-400'}`}>\n                            {message.text}\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            {analysisResult && (\n                <div className=\"mt-8 p-6 bg-slate-900/90 border border-emerald-500/30 rounded-2xl shadow-2xl transition-all\">\n                    <div className=\"flex items-center gap-3 mb-6\">\n                        <div className={`w-3 h-3 rounded-full ${analysisResult.severity === 'High' ? 'bg-red-500 animate-pulse' : 'bg-emerald-500'}`}></div>\n                        <h3 className=\"text-white font-bold text-lg\">Field Analysis: {analysisResult.pestType}</h3>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-4 mb-6\">\n                        <div className=\"bg-slate-800/50 p-4 rounded-xl border border-slate-700\">\n                            <p className=\"text-[10px] text-slate-500 font-black uppercase tracking-widest\">Pest Count</p>\n                            <p className=\"text-2xl font-bold text-white\">{analysisResult.count}</p>\n                        </div>\n                        <div className=\"bg-slate-800/50 p-4 rounded-xl border border-slate-700\">\n                            <p className=\"text-[10px] text-slate-500 font-black uppercase tracking-widest\">Risk Level</p>\n                            <p className={`text-2xl font-bold ${analysisResult.severity === 'High' ? 'text-red-400' : 'text-emerald-400'}`}>{analysisResult.severity}</p>\n                        </div>\n                    </div>\n                    <div className=\"space-y-4\">\n                        <p className=\"text-slate-300 text-sm italic bg-slate-800/30 p-4 rounded-xl border border-slate-800\">\"{analysisResult.reasoning}\"</p>\n                        <div className=\"p-4 bg-emerald-500/10 border border-emerald-500/20 rounded-xl\">\n                            <p className=\"text-[10px] text-emerald-500 font-black uppercase mb-1\">Recommended Action</p>\n                            <p className=\"text-white text-sm font-medium\">{analysisResult.recommendation}</p>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 527, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/expel-ai/client/app/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\nimport { useEffect, useState, useCallback } from 'react';\r\nimport { DataService } from '@/utils/api';\r\nimport PestTrendChart from '@/components/Dashboard/PestTrendChart';\r\nimport ImageUpload from '@/components/Dashboard/ImageUpload';\r\n\r\n// --- Interfaces for TypeScript Safety ---\r\ninterface SensorData {\r\n    temperature: number;\r\n    humidity: number;\r\n    soilMoisture: number;\r\n    riskLevel: string;\r\n}\r\n\r\ninterface PestData {\r\n    pestType: string;\r\n    count: number;\r\n    confidence: number;\r\n    severity: string;\r\n    reasoning?: string;\r\n    recommendation?: string;\r\n    createdAt: string;\r\n}\r\n\r\nexport default function Home() {\r\n    const [pestData, setPestData] = useState<PestData[]>([]);\r\n    const [sensorData, setSensorData] = useState<SensorData[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // üîÑ Data Fetching Logic\r\n    const fetchData = useCallback(async () => {\r\n        try {\r\n            const [pests, sensors] = await Promise.all([\r\n                DataService.getPestDetections(),\r\n                DataService.getSensorData()\r\n            ]);\r\n            setPestData(pests);\r\n            setSensorData(sensors);\r\n        } catch (err) {\r\n            console.error('Connection to backend failed');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [fetchData]);\r\n\r\n    // üìÑ PDF Report Generator\r\n    const downloadPDF = () => {\r\n        const doc = new jsPDF();\r\n        doc.setFontSize(18);\r\n        doc.text(\"ExpelAI - Agricultural Field Report\", 14, 22);\r\n        doc.setFontSize(10);\r\n        doc.setTextColor(100);\r\n        doc.text(`Generated: ${new Date().toLocaleString()}`, 14, 30);\r\n\r\n        const tableRows = pestData.map(p => [\r\n            new Date(p.createdAt).toLocaleDateString(),\r\n            p.pestType,\r\n            p.count,\r\n            p.severity || 'Low',\r\n            p.recommendation || 'Standard Monitoring'\r\n        ]);\r\n\r\n        autoTable(doc, {\r\n            startY: 40,\r\n            head: [['Date', 'Pest Detected', 'Count', 'Risk Level', 'Recommendation']],\r\n            body: tableRows,\r\n            theme: 'striped',\r\n            headStyles: { fillColor: [16, 185, 129] }\r\n        });\r\n\r\n        doc.save(\"ExpelAI_Field_Report.pdf\");\r\n    };\r\n\r\n    if (loading) return (\r\n        <div className=\"flex min-h-screen items-center justify-center bg-[#020617] text-emerald-500 font-bold\">\r\n            BOOTING EXPEL AI SYSTEMS...\r\n        </div>\r\n    );\r\n\r\n    const latest = sensorData[sensorData.length - 1] || { temperature: 24, humidity: 65, soilMoisture: 42, riskLevel: 'Low' };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#020617] text-slate-200 p-6 md:p-12 font-sans\">\r\n\r\n            {/* ‚ö†Ô∏è GLOBAL ALERT BANNER */}\r\n            {pestData.some(p => p.severity === 'High') && (\r\n                <div className=\"bg-red-500/10 border border-red-500/50 p-3 mb-8 rounded-xl text-center animate-pulse\">\r\n                    <p className=\"text-red-500 text-xs font-black tracking-widest uppercase\">\r\n                        ‚ö†Ô∏è Alert: High-Risk Infestation Detected in Polyhouse ‚ö†Ô∏è\r\n                    </p>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"max-w-6xl mx-auto\">\r\n                {/* HEADER */}\r\n                <header className=\"flex justify-between items-center mb-12 border-b border-slate-800 pb-8\">\r\n                    <div>\r\n                        <h1 className=\"text-3xl font-black text-white tracking-tighter\">EXPEL<span className=\"text-emerald-500\">AI</span></h1>\r\n                        <p className=\"text-slate-500 text-sm font-medium\">AI-Powered Polyhouse Monitoring</p>\r\n                    </div>\r\n                    <button\r\n                        onClick={downloadPDF}\r\n                        className=\"bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-3 rounded-2xl font-bold text-xs shadow-lg shadow-emerald-900/20 transition-all\"\r\n                    >\r\n                        üì• DOWNLOAD PDF REPORT\r\n                    </button>\r\n                </header>\r\n\r\n                <main className=\"space-y-10\">\r\n\r\n                    {/* 1. SENSOR DATA CARDS */}\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n                        <StatCard label=\"Air Temp\" value={`${latest.temperature}¬∞C`} color=\"emerald\" />\r\n                        <StatCard label=\"Humidity\" value={`${latest.humidity}%`} color=\"blue\" />\r\n                        <StatCard label=\"Soil Moisture\" value={`${latest.soilMoisture}%`} color=\"cyan\" />\r\n                        <StatCard label=\"Env Risk\" value={latest.riskLevel} color={latest.riskLevel === 'High' ? 'red' : 'emerald'} />\r\n                    </div>\r\n\r\n                    {/* 2. AI UPLOAD TOOL */}\r\n                    <section>\r\n                        <ImageUpload onUploadSuccess={fetchData} />\r\n                    </section>\r\n\r\n                    {/* 3. TREND CHART */}\r\n                    <section className=\"bg-slate-900/50 border border-slate-800 p-8 rounded-[2.5rem]\">\r\n                        <h2 className=\"text-xl font-bold text-white mb-8\">Pest Population Trends</h2>\r\n                        <div className=\"h-[350px]\">\r\n                            <PestTrendChart data={pestData} />\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* 4. ACTIVITY LOG WITH REASONING & RECOMMENDATIONS */}\r\n                    <section className=\"bg-slate-900/50 border border-slate-800 p-8 rounded-[2.5rem]\">\r\n                        <h2 className=\"text-xl font-bold text-white mb-8\">Detailed Field History</h2>\r\n                        <div className=\"space-y-6 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar\">\r\n                            {[...pestData].reverse().map((report, index) => (\r\n                                <div key={index} className=\"p-6 bg-slate-800/30 border border-slate-700/50 rounded-3xl hover:bg-slate-800/60 transition-all\">\r\n                                    <div className=\"flex justify-between items-start mb-4\">\r\n                                        <div>\r\n                                            <div className=\"flex items-center gap-2 mb-1\">\r\n                                                <span className={`w-3 h-3 rounded-full ${report.severity === 'High' ? 'bg-red-500 animate-pulse' : 'bg-emerald-500'}`}></span>\r\n                                                <p className=\"text-white font-bold text-xl\">{report.pestType}</p>\r\n                                            </div>\r\n                                            <p className=\"text-xs text-slate-500 font-medium\">{new Date(report.createdAt).toLocaleString()}</p>\r\n                                        </div>\r\n                                        <div className=\"text-right\">\r\n                                            <p className=\"text-emerald-400 font-black text-3xl\">{report.count}</p>\r\n                                            <p className=\"text-[10px] text-slate-500 uppercase font-bold tracking-tighter\">Total Pests</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Actionable Insights Section */}\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6 pt-6 border-t border-slate-700/50\">\r\n                                        <div>\r\n                                            <p className=\"text-[10px] text-slate-500 font-black uppercase tracking-widest mb-2\">AI Visual Reasoning</p>\r\n                                            <p className=\"text-slate-300 text-sm italic leading-relaxed\">\r\n                                                \"{report.reasoning || 'No specific visual reasoning provided by the AI.'}\"\r\n                                            </p>\r\n                                        </div>\r\n                                        <div className=\"bg-emerald-500/5 p-4 rounded-2xl border border-emerald-500/10\">\r\n                                            <p className=\"text-[10px] text-emerald-500 font-black uppercase tracking-widest mb-2\">Preventive Recommendation</p>\r\n                                            <p className=\"text-white text-sm font-medium\">\r\n                                                {report.recommendation || 'Continue standard polyhouse climate monitoring.'}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                            {pestData.length === 0 && (\r\n                                <p className=\"text-center text-slate-500 py-12\">No field data recorded yet. Upload an image to start.</p>\r\n                            )}\r\n                        </div>\r\n                    </section>\r\n                </main>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Stat Card Sub-Component\r\nfunction StatCard({ label, value, color }: { label: string, value: string, color: 'emerald' | 'blue' | 'cyan' | 'red' }) {\r\n    const textColors = { emerald: \"text-emerald-400\", blue: \"text-blue-400\", cyan: \"text-cyan-400\", red: \"text-red-400\" };\r\n    const borders = { emerald: \"border-emerald-500/20\", blue: \"border-blue-500/20\", cyan: \"border-cyan-500/20\", red: \"border-red-500/20\" };\r\n\r\n    return (\r\n        <div className={`bg-slate-900/40 border ${borders[color]} p-6 rounded-3xl transition-all hover:-translate-y-1`}>\r\n            <p className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-3\">{label}</p>\r\n            <p className={`text-3xl font-black ${textColors[color]}`}>{value}</p>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}}]
}