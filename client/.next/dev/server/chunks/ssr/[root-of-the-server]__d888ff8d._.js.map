{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/expel-ai/client/utils/api.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:5000/api/data';\r\n\r\nexport const DataService = {\r\n    getPestDetections: async () => {\r\n        try {\r\n            const response = await axios.get(`${API_URL}/pests`);\r\n            return response.data;\r\n        } catch (error) {\r\n            console.error('Error fetching pest detections:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    getSensorData: async () => {\r\n        try {\r\n            const response = await axios.get(`${API_URL}/sensors`);\r\n            return response.data;\r\n        } catch (error) {\r\n            console.error('Error fetching sensor data:', error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    uploadImage: async (file: File) => {\r\n        const formData = new FormData();\r\n        formData.append('image', file);\r\n\r\n        try {\r\n            const response = await axios.post(`${API_URL}/detect`, formData, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n            });\r\n            return response.data;\r\n        } catch (error) {\r\n            console.error('Error uploading image:', error);\r\n            throw error;\r\n        }\r\n    }\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,UAAU;AAET,MAAM,cAAc;IACvB,mBAAmB;QACf,IAAI;YACA,MAAM,WAAW,MAAM,gJAAK,CAAC,GAAG,CAAC,GAAG,QAAQ,MAAM,CAAC;YACnD,OAAO,SAAS,IAAI;QACxB,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,mCAAmC;YACjD,MAAM;QACV;IACJ;IAEA,eAAe;QACX,IAAI;YACA,MAAM,WAAW,MAAM,gJAAK,CAAC,GAAG,CAAC,GAAG,QAAQ,QAAQ,CAAC;YACrD,OAAO,SAAS,IAAI;QACxB,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,MAAM;QACV;IACJ;IAEA,aAAa,OAAO;QAChB,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,SAAS;QAEzB,IAAI;YACA,MAAM,WAAW,MAAM,gJAAK,CAAC,IAAI,CAAC,GAAG,QAAQ,OAAO,CAAC,EAAE,UAAU;gBAC7D,SAAS;oBACL,gBAAgB;gBACpB;YACJ;YACA,OAAO,SAAS,IAAI;QACxB,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,0BAA0B;YACxC,MAAM;QACV;IACJ;AACJ"}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/expel-ai/client/components/Dashboard/ImageUpload.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef } from 'react';\nimport { DataService } from '@/utils/api';\n\n// This tells TypeScript that ImageUpload can now receive the 'onUploadSuccess' instruction\nexport default function ImageUpload({ onUploadSuccess }: { onUploadSuccess?: () => void }) {\n    const [selectedFile, setSelectedFile] = useState<File | null>(null);\n    const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n    const [uploading, setUploading] = useState(false);\n    const [analysisResult, setAnalysisResult] = useState<any>(null);\n    const [message, setMessage] = useState<{ text: string; type: 'success' | 'error' } | null>(null);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n\n    const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n        if (event.target.files && event.target.files[0]) {\n            const file = event.target.files[0];\n            setSelectedFile(file);\n            setPreviewUrl(URL.createObjectURL(file));\n            setMessage(null);\n            setAnalysisResult(null);\n        }\n    };\n\n    const handleUpload = async () => {\n        if (!selectedFile) return;\n\n        setUploading(true);\n        setMessage(null);\n        setAnalysisResult(null);\n\n        try {\n            const response = await DataService.uploadImage(selectedFile);\n\n            // 1. Save results to show in the UI box\n            setAnalysisResult(response.data);\n            setMessage({ text: 'Analysis complete!', type: 'success' });\n\n            // ðŸ”„ 2. NEW: Trigger the refresh of the main dashboard history\n            if (onUploadSuccess) {\n                onUploadSuccess();\n            }\n\n        } catch (error) {\n            console.error('Upload failed:', error);\n            setMessage({ text: 'Analysis failed. Please try again.', type: 'error' });\n        } finally {\n            setUploading(false);\n        }\n    };\n\n    return (\n        <div className=\"bg-[#0f172a] p-6 rounded-2xl border border-slate-800 shadow-xl mb-6\">\n            <h3 className=\"text-xl font-bold text-white mb-4\">AI Pest Detection</h3>\n\n            <div className=\"flex flex-col md:flex-row gap-6 items-start\">\n                <div className=\"flex-1 w-full\">\n                    <div\n                        className={`border-2 border-dashed rounded-xl p-8 text-center transition-colors cursor-pointer\n                            ${selectedFile ? 'border-emerald-500/50 bg-emerald-500/5' : 'border-slate-700 hover:border-slate-500 hover:bg-slate-800/50'}\n                        `}\n                        onClick={() => fileInputRef.current?.click()}\n                    >\n                        <input\n                            type=\"file\"\n                            ref={fileInputRef}\n                            onChange={handleFileSelect}\n                            accept=\"image/*\"\n                            className=\"hidden\"\n                        />\n\n                        {previewUrl ? (\n                            <div className=\"relative h-48 w-full flex items-center justify-center\">\n                                <img\n                                    src={previewUrl}\n                                    alt=\"Preview\"\n                                    className=\"max-h-full max-w-full rounded-lg shadow-lg border border-slate-700\"\n                                />\n                            </div>\n                        ) : (\n                            <div className=\"flex flex-col items-center gap-3 py-6\">\n                                <p className=\"text-slate-300 font-medium\">Click to upload leaf image</p>\n                            </div>\n                        )}\n                    </div>\n                </div>\n\n                <div className=\"w-full md:w-64 flex flex-col gap-4\">\n                    <button\n                        onClick={handleUpload}\n                        disabled={!selectedFile || uploading}\n                        className={`py-3 px-6 rounded-xl font-bold text-white transition-all transform shadow-lg\n                            ${!selectedFile || uploading ? 'bg-slate-800 text-slate-500' : 'bg-emerald-600 hover:bg-emerald-500'}\n                        `}\n                    >\n                        {uploading ? 'Analyzing...' : 'Analyze Image'}\n                    </button>\n                    {message && (\n                        <div className={`p-3 rounded-lg text-sm font-medium text-center ${message.type === 'success' ? 'bg-emerald-500/10 text-emerald-400 border border-emerald-500/20' : 'bg-red-500/10 text-red-400'}`}>\n                            {message.text}\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            {analysisResult && (\n                <div className=\"mt-8 p-6 bg-slate-900/90 border border-emerald-500/30 rounded-2xl shadow-2xl transition-all\">\n                    <div className=\"flex items-center gap-3 mb-6\">\n                        <div className={`w-3 h-3 rounded-full ${analysisResult.severity === 'High' ? 'bg-red-500 animate-pulse' : 'bg-emerald-500'}`}></div>\n                        <h3 className=\"text-white font-bold text-lg\">Field Analysis: {analysisResult.pestType}</h3>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-4 mb-6\">\n                        <div className=\"bg-slate-800/50 p-4 rounded-xl border border-slate-700\">\n                            <p className=\"text-[10px] text-slate-500 font-black uppercase tracking-widest\">Pest Count</p>\n                            <p className=\"text-2xl font-bold text-white\">{analysisResult.count}</p>\n                        </div>\n                        <div className=\"bg-slate-800/50 p-4 rounded-xl border border-slate-700\">\n                            <p className=\"text-[10px] text-slate-500 font-black uppercase tracking-widest\">Risk Level</p>\n                            <p className={`text-2xl font-bold ${analysisResult.severity === 'High' ? 'text-red-400' : 'text-emerald-400'}`}>{analysisResult.severity}</p>\n                        </div>\n                    </div>\n                    <div className=\"space-y-4\">\n                        <p className=\"text-slate-300 text-sm italic bg-slate-800/30 p-4 rounded-xl border border-slate-800\">\"{analysisResult.reasoning}\"</p>\n                        <div className=\"p-4 bg-emerald-500/10 border border-emerald-500/20 rounded-xl\">\n                            <p className=\"text-[10px] text-emerald-500 font-black uppercase mb-1\">Recommended Action</p>\n                            <p className=\"text-white text-sm font-medium\">{analysisResult.recommendation}</p>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 449, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/expel-ai/client/app/scan/page.tsx"],"sourcesContent":["'use client';\nimport ImageUpload from '@/components/Dashboard/ImageUpload';\n\nexport default function ScanPage() {\n    return (\n        <div className=\"max-w-4xl mx-auto space-y-10\">\n            <header>\n                <h1 className=\"text-3xl font-black text-white\">AI Pest Scanner</h1>\n                <p className=\"text-slate-500\">Upload high-res leaf images for PhD-level agricultural reasoning.</p>\n            </header>\n\n            <section className=\"bg-slate-900/50 border border-slate-800 p-10 rounded-[2.5rem]\">\n                <ImageUpload onUploadSuccess={() => alert('Detection complete! Check History.')} />\n            </section>\n        </div>\n    );\n}"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGe,SAAS;IACpB,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;;kCACG,8OAAC;wBAAG,WAAU;kCAAiC;;;;;;kCAC/C,8OAAC;wBAAE,WAAU;kCAAiB;;;;;;;;;;;;0BAGlC,8OAAC;gBAAQ,WAAU;0BACf,cAAA,8OAAC,kJAAW;oBAAC,iBAAiB,IAAM,MAAM;;;;;;;;;;;;;;;;;AAI1D"}}]
}